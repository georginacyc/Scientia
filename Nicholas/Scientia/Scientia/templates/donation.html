{% extends "template.html" %}
{% block head %}
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
{{ super() }}
{% endblock %}

{% block content_body %}
<form id="myForm" action="/action_page.php">
    Specify the amount you want to tip to John Doe: <input type="text" name="fname" value="0" required><br>
</form>

<button onclick="myFunction()">Confirm</button>

<p id="demo"></p>
<br>
<script src="https://www.paypal.com/sdk/js?client-id=AQyfiodqb2St23aHqDYRFsHGd743fS7E4MAiIqVky2mATNAsqIuwg_3qEZJvZlb0aQ6_8JNyNI1OKwUp&disable-funding=credit,card"></script>

<script>
    function myFunction() {
        var x = document.getElementById("myForm").elements[0].value;
        document.getElementById("demo").innerHTML = "You are donating $"+ x + " to John Doe";
    }
    paypal.Buttons({
        style: {
            color: 'blue',
            shape: 'pill'
        },
        createOrder: function (data, actions) {
            return actions.order.create({
                purchase_units: [{
                    amount: {
                        value: document.getElementById("myForm").elements[0].value
                    }
                }]
            });
        },
        onApprove: function (data, actions) {
            return actions.order.capture().then(function (details) {
                console.log(details)
                window.location.replace("http://172.20.10.2:8080/success")
            })
        },
        onCancel: function (data) {
            window.location.replace("http://172.20.10.2:8080/Oncancel")
        }
    }).render('body');</script>
{% endblock %}